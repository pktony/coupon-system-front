# 🎫 쿠폰 시스템 동시성 테스트 웹 애플리케이션

이 웹 애플리케이션은 쿠폰 시스템의 동시성을 테스트하기 위해 만들어졌습니다. 여러 사용자가 동시에 쿠폰을 요청할 때 올바르게 제한된 개수만큼만 발급되는지 확인할 수 있습니다.


API 테스트 페이지: https://doroks.tplinkdns.com/couponsystem/front
API 서버 Github: https://github.com/pktony/coupon-system

## 🚀 주요 기능

### 1. 사용자 생성
- 지정된 개수만큼 랜덤 사용자를 생성
- 각 사용자는 고유한 ID와 이름을 가짐
- 최대 10000명까지 생성 가능

### 2. 동시성 테스트
- 생성된 모든 사용자가 동시에 쿠폰 요청
- Promise.allSettled()를 사용하여 진정한 동시 요청 구현
- 실시간 진행 상황 표시

### 3. 결과 분석
- 성공/실패 요청 수 표시
- 소요 시간 측정
- 예상 한도와 실제 발급 수 비교
- 각 요청의 상세 응답 내용 확인

### 4. 테스트 제어
- 진행 중인 테스트를 언제든 취소 가능
- AbortController를 사용한 요청 중단

## 📋 사용 방법

### 1. 애플리케이션 시작
```bash
npm install
npm run dev
```

### 2. 테스트 설정
~~1. **API URL 설정**: 쿠폰 발급 API의 엔드포인트 입력~~

   ~~- 기본값: `http://localhost:8080/api/coupons/issue`~~
   
2. **생성할 유저 수**: 동시 요청을 보낼 사용자 수 설정
   - 권장: 1000명 (시스템 성능에 따라 조절)
   
3. **쿠폰 한도**: 시스템에서 설정한 쿠폰 발급 한도
   - 쿠폰 한도만큼 발급 후, 이후 요청부터 실패

### 3. 테스트 실행
1. "유저 N명 생성" 버튼 클릭
2. 생성된 사용자 목록 확인
3. "동시 쿠폰 발급 테스트 시작" 버튼 클릭
4. 결과 확인

## 🔧 API 요구사항

테스트할 쿠폰 API는 다음 형식을 준수함:

### 요청 형식
```http
POST /api/coupons/issue
Content-Type: application/json

{
  "userId": "string",
  "userName": "string"
}
```

### 응답 형식

**성공 시 (HTTP 200):**
```json
{
  "success": true,
  "couponId": "string",
  "message": "쿠폰이 성공적으로 발급되었습니다."
}
```

**실패 시 (HTTP 4xx/5xx):**
```json
{
  "success": false,
  "message": "쿠폰 발급 한도를 초과했습니다."
}
```

## 📊 테스트 결과 해석

### 정상적인 동시성 제어
- 설정한 한도만큼만 성공 응답
- 나머지는 "한도 초과" 등의 오류 메시지

### 문제가 있는 경우
- 한도를 초과하여 쿠폰 발급
- 예상보다 적은 쿠폰 발급 (Race Condition)
- 요청 실패율이 비정상적으로 높음

## 🛠️ 기술 스택

- **React 18** with TypeScript
- **Vite** - 빠른 개발 환경
- **Axios** - HTTP 클라이언트


## 🚨 주의사항

1. **브라우저 부하**: 많은 수의 동시 요청은 브라우저에 부하를 줄 수 있습니다. (일부 요청 실패 가능)
    - 일부 요청 실패 시, 다시 테스트버튼을 눌러 남은 쿠폰 수 만큼 차감되는지 확인 가능
2. **네트워크 제한**: 브라우저별 동시 연결 수 제한이 있을 수 있습니다.
